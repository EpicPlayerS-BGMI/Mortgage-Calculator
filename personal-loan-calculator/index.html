<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>
      Personal Loan EMI Calculator | Monthly EMI & Interest – CalcBase
    </title>

    <meta
      name="description"
      content="Free Personal Loan EMI Calculator to calculate monthly installments, total interest, and repayment schedule. Plan loans for travel, weddings, or emergencies easily."
    />

    <link
      rel="canonical"
      href="https://calcbase.tech/personal-loan-calculator/"
    />

    <meta name="robots" content="index, follow" />
    <meta name="author" content="CalcBase" />

    <meta
      name="keywords"
      content="personal loan emi calculator, loan emi calculator, personal loan interest calculator, monthly emi calculator, loan repayment calculator, personal loan calculator india"
    />

    <link rel="preconnect" href="https://www.googletagmanager.com" />
    <link rel="preconnect" href="https://www.google-analytics.com" />

    <meta property="og:type" content="website" />
    <meta
      property="og:title"
      content="Personal Loan EMI Calculator | Monthly EMI – CalcBase"
    />
    <meta
      property="og:description"
      content="Calculate personal loan EMI, total interest, and repayment amount instantly using CalcBase Personal Loan Calculator."
    />
    <meta
      property="og:url"
      content="https://calcbase.tech/personal-loan-calculator/"
    />
    <meta
      property="og:image"
      content="https://calcbase.tech/assets/og/personal-loan-calculator.png"
    />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />

    <meta name="twitter:card" content="summary_large_image" />
    <meta
      name="twitter:title"
      content="Personal Loan EMI Calculator | Monthly EMI – CalcBase"
    />
    <meta
      name="twitter:description"
      content="Free personal loan EMI calculator to estimate monthly installments, interest, and total repayment."
    />
    <meta
      name="twitter:image"
      content="https://calcbase.tech/assets/og/personal-loan-calculator.png"
    />

    <link rel="icon" href="/assets/favicon.ico" sizes="any" />
    <link rel="apple-touch-icon" href="/assets/favicon.ico" />

    <link rel="stylesheet" href="/assets/style.css" />
    <link rel="stylesheet" href="/assets/output.css" />

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"
      rel="stylesheet"
    />

    <!-- Schema -->
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "SoftwareApplication",
        "name": "Personal Loan EMI Calculator",
        "url": "https://calcbase.tech/personal-loan-calculator/",
        "applicationCategory": "FinanceApplication",
        "operatingSystem": "All",
        "description": "Personal loan EMI calculator to calculate monthly installments, total interest, and repayment amount."
      }
    </script>
  </head>

  <body
    class="bg-gradient-to-b from-slate-50 via-slate-100 to-slate-50 dark:from-slate-900 dark:via-slate-950 dark:to-slate-900 text-slate-800 dark:text-slate-200 transition-colors duration-300"
  >
    <header
      id="calcpages-header"
      class="sticky top-0 z-50 sticky top-0 z-50 backdrop-blur-lg bg-white/80 dark:bg-slate-900/80 border-b border-slate-200 dark:border-slate-800"
    ></header>
    <main class="flex-grow w-full max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10">
      <section class="text-center max-w-3xl mx-auto mb-12">
        <h1
          class="text-3xl md:text-5xl font-extrabold mb-4 tracking-tight text-slate-900 dark:text-white"
        >
          Personal Loan
          <span class="text-indigo-600 dark:text-indigo-400"
            >EMI Calculator</span
          >
        </h1>
        <p class="text-lg text-slate-600 dark:text-slate-400 leading-relaxed">
          Planning for a wedding, renovation, or medical expense? Calculate your
          personal loan EMIs instantly and plan your budget better.
        </p>
      </section>

      <div class="grid grid-cols-1 lg:grid-cols-12 gap-8 items-start mb-16">
        <div
          class="lg:col-span-7 bg-white dark:bg-slate-800 rounded-2xl shadow-xl border border-slate-200 dark:border-slate-700 overflow-hidden"
        >
          <div class="p-6 md:p-8 space-y-8">
            <div
              class="bg-slate-100 dark:bg-slate-900/50 p-1.5 rounded-xl flex"
            >
              <button
                onclick="setCurrency('USD')"
                id="btn-usd"
                class="flex-1 py-2.5 text-sm font-semibold rounded-lg text-center transition-all shadow-sm bg-white text-indigo-600 dark:bg-slate-700 dark:text-white"
              >
                USD ($)
              </button>
              <button
                onclick="setCurrency('GBP')"
                id="btn-gbp"
                class="flex-1 py-2.5 text-sm font-medium rounded-lg text-center transition-all text-slate-500 hover:text-slate-700 dark:text-slate-400"
              >
                GBP (£)
              </button>
              <button
                onclick="setCurrency('INR')"
                id="btn-inr"
                class="flex-1 py-2.5 text-sm font-medium rounded-lg text-center transition-all text-slate-500 hover:text-slate-700 dark:text-slate-400"
              >
                INR (₹)
              </button>
            </div>

            <div class="space-y-6">
              <div>
                <label
                  class="block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2"
                  >Loan Amount</label
                >
                <div class="relative">
                  <span
                    class="sym absolute left-4 top-3.5 text-slate-400 font-bold"
                    >$</span
                  >
                  <input
                    id="loanAmount"
                    type="number"
                    inputmode="decimal"
                    value="10000"
                    class="w-full pl-10 pr-4 py-3 rounded-xl border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-900 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none transition font-mono text-lg font-medium"
                    oninput="calculateEMI()"
                  />
                </div>
              </div>

              <div>
                <div class="flex justify-between mb-2">
                  <label
                    class="text-sm font-semibold text-slate-700 dark:text-slate-300"
                    >Interest Rate (% P.A)</label
                  >
                  <span
                    class="text-sm font-mono text-indigo-600 dark:text-indigo-400 font-bold"
                    id="rate-display"
                    >11%</span
                  >
                </div>

                <input
                  id="rate-slider"
                  type="range"
                  min="1"
                  max="30"
                  step="0.1"
                  value="11"
                  class="w-full mb-4 h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer dark:bg-slate-700 accent-indigo-600"
                  oninput="syncInput('rate', 'slider')"
                />

                <div class="relative">
                  <input
                    id="rate-number"
                    type="number"
                    step="0.1"
                    value="11"
                    class="w-full px-4 py-3 rounded-xl border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-900 focus:ring-2 focus:ring-indigo-500 outline-none transition font-mono text-lg"
                    oninput="syncInput('rate', 'number')"
                  />
                </div>
              </div>

              <div>
                <div class="flex justify-between items-center mb-2">
                  <label
                    class="text-sm font-semibold text-slate-700 dark:text-slate-300"
                    >Loan Tenure</label
                  >
                  <div
                    class="flex bg-slate-100 dark:bg-slate-700 rounded-lg p-1"
                  >
                    <button
                      onclick="setTenureMode('years')"
                      id="btn-years"
                      class="px-3 py-1 text-xs font-bold rounded-md bg-white text-indigo-600 shadow-sm transition-all"
                    >
                      Yr
                    </button>
                    <button
                      onclick="setTenureMode('months')"
                      id="btn-months"
                      class="px-3 py-1 text-xs font-medium rounded-md text-slate-500 transition-all"
                    >
                      Mo
                    </button>
                  </div>
                </div>
                <div class="relative">
                  <input
                    id="tenure"
                    type="number"
                    value="3"
                    class="w-full px-4 py-3 rounded-xl border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-900 focus:ring-2 focus:ring-indigo-500 outline-none transition font-mono text-lg"
                    oninput="calculateEMI()"
                  />
                  <span
                    id="tenure-unit"
                    class="absolute right-4 top-3.5 text-xs font-bold text-slate-400 uppercase tracking-wider"
                    >YEARS</span
                  >
                </div>
              </div>

              <div>
                <label
                  class="block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2"
                  >Processing Fee (Optional)</label
                >
                <div class="relative">
                  <span
                    class="sym absolute left-4 top-3.5 text-slate-400 font-bold"
                    >$</span
                  >
                  <input
                    id="processingFee"
                    type="number"
                    value="0"
                    class="w-full pl-10 pr-4 py-3 rounded-xl border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-900 focus:ring-2 focus:ring-indigo-500 outline-none transition font-mono text-lg"
                    oninput="calculateEMI()"
                  />
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="lg:col-span-5 space-y-6">
          <div
            class="bg-indigo-600 text-white rounded-2xl shadow-xl shadow-indigo-200 dark:shadow-none p-6 md:p-8 relative overflow-hidden"
          >
            <div
              class="absolute top-0 right-0 -mt-10 -mr-10 w-40 h-40 bg-white opacity-10 rounded-full"
            ></div>

            <div class="relative z-10 text-center">
              <p
                class="text-indigo-100 text-xs font-bold uppercase tracking-widest mb-2"
              >
                Your Monthly Payment
              </p>
              <h2
                id="monthly-emi"
                class="text-5xl font-extrabold tracking-tight mb-6"
              >
                $0
              </h2>

              <div
                class="bg-white/10 rounded-xl p-4 backdrop-blur-sm border border-white/10"
              >
                <div class="flex justify-center mb-4 relative">
                  <div id="chart-visual" class="pie-chart shadow-lg"></div>
                  <div
                    class="absolute inset-0 m-auto w-24 h-24 bg-indigo-600 rounded-full flex items-center justify-center"
                  >
                    <span class="text-[10px] uppercase font-bold opacity-70"
                      >Breakdown</span
                    >
                  </div>
                </div>

                <div class="space-y-3 text-sm">
                  <div
                    class="flex justify-between items-center pb-2 border-b border-white/10"
                  >
                    <span class="text-indigo-100">Principal Amount</span>
                    <span id="res-principal" class="font-bold">$0</span>
                  </div>
                  <div
                    class="flex justify-between items-center pb-2 border-b border-white/10"
                  >
                    <div class="flex items-center gap-2">
                      <div class="w-2 h-2 rounded-full bg-white"></div>
                      <span class="text-indigo-100">Total Interest</span>
                    </div>
                    <span id="res-interest" class="font-bold text-white"
                      >$0</span
                    >
                  </div>
                  <div class="flex justify-between items-center pt-1">
                    <span class="text-indigo-200 font-bold">Total Payable</span>
                    <span id="res-total" class="font-bold text-lg">$0</span>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div
            class="hidden opacity-0 bg-slate-100 dark:bg-slate-800 border-2 border-dashed border-slate-300 dark:border-slate-600 rounded-xl min-h-[250px] flex flex-col items-center justify-center p-4"
          >
            <span
              class="text-xs font-bold text-slate-400 uppercase tracking-widest mb-2"
              >Advertisement</span
            >
            <div class="text-center text-slate-500 text-sm">
              Space for AdSense Unit<br />(300x250)
            </div>
          </div>
        </div>
      </div>

      <div class="border-t dark:border-slate-800 pt-16 mt-16" id="guide">
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-12">
          <article class="lg:col-span-2 prose dark:prose-invert max-w-none">
            <h2
              id="why-use-us"
              class="text-3xl font-bold text-slate-900 dark:text-white mb-6"
            >
              Why Use the CalcBase EMI Calculator?
            </h2>
            <p class="text-slate-600 dark:text-slate-400 mb-6">
              In today's volatile financial market, understanding your debt
              obligations is critical. Whether you are looking for a
              **mortgage**, planning to buy a **new car**, or taking out a
              **personal loan**, our calculator provides instant, bank-grade
              accuracy. Unlike simple estimators, we factor in the reducing
              balance method used by major financial institutions in the US, UK,
              and India.
            </p>

            <h3
              class="text-xl font-bold text-slate-800 dark:text-slate-200 mt-8 mb-4"
            >
              How EMI Is Calculated
            </h3>
            <p class="text-slate-600 dark:text-slate-400 mb-4">
              The Equated Monthly Installment (EMI) represents the fixed payment
              you make to your lender. It combines both the principal repayment
              and the interest component. As your loan tenure progresses, the
              interest portion decreases while the principal repayment
              increases.
            </p>
            <div
              class="bg-indigo-50 dark:bg-slate-800 p-4 rounded-lg border-l-4 border-indigo-500 my-6 mb-2"
            >
              <p class="font-mono text-sm text-indigo-800 dark:text-indigo-300">
                <strong>Formula:</strong> E = P x R x (1+R)^N / [(1+R)^N-1]
              </p>
            </div>
            <p class="text-xs text-gray-500">
              This calculator follows standard reducing-balance EMI formulas
              used by major banks.
            </p>

            <div
              class="hidden opacity-0 my-8 bg-slate-50 dark:bg-slate-900 h-32 flex items-center justify-center border border-slate-200 dark:border-slate-700 rounded-lg"
            >
              <span class="text-xs text-slate-400 uppercase font-bold"
                >Advertisement</span
              >
            </div>

            <h3
              class="text-xl font-bold text-slate-800 dark:text-slate-200 mt-8 mb-4"
            >
              Factors That Affect Your Loan EMI
            </h3>
            <ul
              class="list-disc pl-5 space-y-2 text-slate-600 dark:text-slate-400 mb-6"
            >
              <li>
                <strong>Principal Amount:</strong> The total sum borrowed.
                Higher amounts lead to higher EMIs.
              </li>
              <li>
                <strong>Interest Rate:</strong> A fluctuating factor based on
                the central bank's repo rates and your credit score. Even a 0.5%
                difference can save you thousands over the loan term.
              </li>
              <li>
                <strong>Loan Tenure:</strong> Choosing a longer tenure reduces
                your monthly burden but significantly increases the total
                interest payout.
              </li>
            </ul>

            <h3
              class="text-xl font-bold text-slate-800 dark:text-slate-200 mt-8 mb-4"
            >
              Tips to Lower Your EMI
            </h3>
            <p class="text-slate-600 dark:text-slate-400">
              1. <strong>Improve Credit Score:</strong> A score above 750 often
              qualifies you for lower interest rates.<br />
              2. <strong>Prepayments:</strong> Using annual bonuses to pay off a
              chunk of the principal can drastically reduce your tenure.<br />
              3. <strong>Compare Lenders:</strong> Use our tool to compare
              offers from different banks by simply toggling the interest rate
              field.
            </p>
          </article>

          <aside class="space-y-8">
            <div
              class="bg-white dark:bg-slate-800 p-6 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700"
            >
              <h3 class="font-bold text-lg mb-4 text-slate-900 dark:text-white">
                Popular Calculations
              </h3>
              <ul class="space-y-3 text-sm text-slate-600 dark:text-slate-400">
                <li>
                  <a
                    href="#"
                    class="hover:text-indigo-600 flex items-center gap-2"
                    ><span
                      class="w-1.5 h-1.5 rounded-full bg-indigo-500"
                    ></span>
                    Home Loan EMI</a
                  >
                </li>
                <li>
                  <a
                    href="#"
                    class="hover:text-indigo-600 flex items-center gap-2"
                    ><span
                      class="w-1.5 h-1.5 rounded-full bg-indigo-500"
                    ></span>
                    Car Loan Amortization</a
                  >
                </li>
                <li>
                  <a
                    href="#"
                    class="hover:text-indigo-600 flex items-center gap-2"
                    ><span
                      class="w-1.5 h-1.5 rounded-full bg-indigo-500"
                    ></span>
                    Personal Loan Interest</a
                  >
                </li>
              </ul>
            </div>

            <div
              class="hidden opacity-0 sticky top-24 bg-slate-100 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl h-[600px] flex items-center justify-center"
            >
              <div class="text-center">
                <span
                  class="text-xs font-bold text-slate-400 uppercase tracking-widest block mb-2"
                  >Advertisement</span
                >
                <span class="text-slate-500 text-xs"
                  >Vertical Skyscraper Ad</span
                >
              </div>
            </div>
          </aside>
        </div>
      </div>

      <section id="faq" class="mt-20 max-w-4xl mx-auto">
        <h2
          class="text-3xl font-bold text-center mb-10 text-slate-900 dark:text-white"
        >
          Frequently Asked Questions
        </h2>
        <div class="space-y-4">
          <details
            class="group bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 overflow-hidden transition-all duration-200 open:shadow-md"
          >
            <summary
              class="flex justify-between items-center p-5 cursor-pointer list-none font-medium text-slate-800 dark:text-slate-200 hover:bg-slate-50 dark:hover:bg-slate-700/50 transition"
            >
              <span>What happens if I increase my loan tenure?</span>
              <span
                class="transition-transform group-open:rotate-180 text-indigo-500"
              >
                <svg
                  width="20"
                  height="20"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M19 9l-7 7-7-7"
                  />
                </svg>
              </span>
            </summary>
            <div
              class="p-5 pt-0 text-slate-600 dark:text-slate-400 leading-relaxed"
            >
              Increasing your tenure will lower your monthly EMI amount, making
              it easier on your monthly budget. However, it will increase the
              <strong>total interest</strong> you pay to the bank over the life
              of the loan. It is generally recommended to choose the shortest
              tenure you can comfortably afford.
            </div>
          </details>

          <details
            class="group bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 overflow-hidden transition-all duration-200 open:shadow-md"
          >
            <summary
              class="flex justify-between items-center p-5 cursor-pointer list-none font-medium text-slate-800 dark:text-slate-200 hover:bg-slate-50 dark:hover:bg-slate-700/50 transition"
            >
              <span>Are processing fees included in the EMI?</span>
              <span
                class="transition-transform group-open:rotate-180 text-indigo-500"
              >
                <svg
                  width="20"
                  height="20"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M19 9l-7 7-7-7"
                  />
                </svg>
              </span>
            </summary>
            <div
              class="p-5 pt-0 text-slate-600 dark:text-slate-400 leading-relaxed"
            >
              No. Processing fees are typically a one-time upfront charge
              deducted from the loan amount or paid separately. They are not
              part of the monthly installment formula, but they do add to the
              total cost of borrowing. Use the "Processing Fee" field in our
              calculator to see the total impact.
            </div>
          </details>

          <details
            class="group bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 overflow-hidden transition-all duration-200 open:shadow-md"
          >
            <summary
              class="flex justify-between items-center p-5 cursor-pointer list-none font-medium text-slate-800 dark:text-slate-200 hover:bg-slate-50 dark:hover:bg-slate-700/50 transition"
            >
              <span>Is this calculator accurate for all banks?</span>
              <span
                class="transition-transform group-open:rotate-180 text-indigo-500"
              >
                <svg
                  width="20"
                  height="20"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M19 9l-7 7-7-7"
                  />
                </svg>
              </span>
            </summary>
            <div
              class="p-5 pt-0 text-slate-600 dark:text-slate-400 leading-relaxed"
            >
              Yes. This calculator uses the standardized reducing balance
              formula used by major banks in the US, UK, Canada, and India.
              However, actual bank figures may vary slightly due to tax
              implications or specific bank policies regarding compounding
              periods.
            </div>
          </details>
        </div>
      </section>
    </main>
    <!-- Footer -->
    <div id="site-footer"></div>
    <script src="/assets/common.js"></script>

    <script>
      let currencySym = "$";
      let currentLocale = "en-US";
      let isYears = true;

      // --- NEW: Sync Function for 2-Way Binding ---
      function syncInput(type, source) {
        // Get references to the specific elements
        const slider = document.getElementById(`${type}-slider`);
        const number = document.getElementById(`${type}-number`);
        const display = document.getElementById(`${type}-display`);

        if (source === "slider") {
          // If user moved slider, update the text box
          number.value = slider.value;
        } else if (source === "number") {
          // If user typed number, update the slider
          slider.value = number.value;
        }

        // Update the % label if it exists (only for Rate)
        if (display) {
          display.innerText = slider.value + "%";
        }

        // Trigger calculation
        calculateEMI();
      }

      function setCurrency(type) {
        if (type === "USD") {
          currencySym = "$";
          currentLocale = "en-US";
        } else if (type === "GBP") {
          currencySym = "£";
          currentLocale = "en-GB";
        } else if (type === "INR") {
          currencySym = "₹";
          currentLocale = "en-IN";
        }

        // Update Button Styles
        const buttons = ["btn-usd", "btn-gbp", "btn-inr"];
        buttons.forEach((id) => {
          const btn = document.getElementById(id);
          if (id === `btn-${type.toLowerCase()}`) {
            btn.className =
              "flex-1 py-2.5 text-sm font-semibold rounded-lg text-center transition-all shadow-sm bg-white text-indigo-600 dark:bg-slate-700 dark:text-white";
          } else {
            btn.className =
              "flex-1 py-2.5 text-sm font-medium rounded-lg text-center transition-all text-slate-500 hover:text-slate-700 dark:text-slate-400 hover:dark:text-slate-200";
          }
        });

        // Update all symbols on page
        document
          .querySelectorAll(".sym")
          .forEach((s) => (s.innerText = currencySym));
        calculateEMI();
      }

      function setTenureMode(mode) {
        const input = document.getElementById("tenure");
        const btnYears = document.getElementById("btn-years");
        const btnMonths = document.getElementById("btn-months");
        const label = document.getElementById("tenure-unit");

        let currentVal = parseFloat(input.value) || 0;

        if (mode === "years") {
          if (!isYears) {
            // Convert Months -> Years
            input.value = (currentVal / 12).toFixed(1).replace(/\.0$/, "");
            isYears = true;
          }
          btnYears.className =
            "px-3 py-1 text-xs font-bold rounded-md bg-white text-indigo-600 shadow-sm transition-all";
          btnMonths.className =
            "px-3 py-1 text-xs font-medium rounded-md text-slate-500 transition-all hover:text-indigo-600";
          label.innerText = "YEARS";
        } else {
          if (isYears) {
            // Convert Years -> Months
            input.value = Math.round(currentVal * 12);
            isYears = false;
          }
          btnMonths.className =
            "px-3 py-1 text-xs font-bold rounded-md bg-white text-indigo-600 shadow-sm transition-all";
          btnYears.className =
            "px-3 py-1 text-xs font-medium rounded-md text-slate-500 transition-all hover:text-indigo-600";
          label.innerText = "MONTHS";
        }
        calculateEMI();
      }

      function formatMoney(amount) {
        return new Intl.NumberFormat(currentLocale, {
          style: "currency",
          currency:
            currencySym === "$" ? "USD" : currencySym === "£" ? "GBP" : "INR",
          maximumFractionDigits: 0,
        }).format(amount);
      }

      function calculateEMI() {
        // 1. Get Values directly from the number inputs
        const P = parseFloat(document.getElementById("loanAmount").value) || 0;

        // IMPORTANT: Read from the new ID 'rate-number'
        const rateInput =
          parseFloat(document.getElementById("rate-number").value) || 0;

        const tenureInput =
          parseFloat(document.getElementById("tenure").value) || 0;
        const fees =
          parseFloat(document.getElementById("processingFee").value) || 0;

        // 2. Validate
        if (P === 0 || tenureInput === 0) {
          document.getElementById("monthly-emi").innerText = formatMoney(0);
          return;
        }

        // 3. Calculate
        const N = isYears ? tenureInput * 12 : tenureInput; // Total months
        const R = rateInput / 12 / 100; // Monthly Rate

        let emi = 0;
        if (rateInput === 0) {
          emi = P / N; // No interest case
        } else {
          emi = (P * R * Math.pow(1 + R, N)) / (Math.pow(1 + R, N) - 1);
        }

        const totalPayment = emi * N;
        const totalInterest = totalPayment - P;

        // 4. Update UI Results
        document.getElementById("monthly-emi").innerText = formatMoney(emi);
        document.getElementById("res-principal").innerText = formatMoney(P);
        document.getElementById("res-interest").innerText =
          formatMoney(totalInterest);
        document.getElementById("res-total").innerText = formatMoney(
          totalPayment + fees
        );

        // 5. Update Pie Chart
        const totalForChart = P + totalInterest;
        // Protect against division by zero if total is 0
        const interestPercent =
          totalForChart > 0 ? (totalInterest / totalForChart) * 100 : 0;

        document
          .getElementById("chart-visual")
          .style.setProperty("--p", `${interestPercent}%`);
      }

      function toggleTheme() {
        const iconDark = document.getElementById("theme-icon-dark");
        const iconLight = document.getElementById("theme-icon-light");

        if (document.documentElement.classList.contains("dark")) {
          document.documentElement.classList.remove("dark");
          localStorage.setItem("color-theme", "light");
          iconLight.classList.remove("hidden");
          iconDark.classList.add("hidden");
        } else {
          document.documentElement.classList.add("dark");
          localStorage.setItem("color-theme", "dark");
          iconDark.classList.remove("hidden");
          iconLight.classList.add("hidden");
        }
      }
    </script>
  </body>
</html>
